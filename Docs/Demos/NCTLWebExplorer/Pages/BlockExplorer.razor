@page "/blocks"
@using Casper.Network.SDK.Types

<h3>Blocks</h3>

<div class="row">
    <div class="col-lg-12">
        <RadzenDataGrid @ref="_blockGrid" AllowFiltering="false"
                        AllowPaging="true"
                        PageSize="20"
                        PagerHorizontalAlign="HorizontalAlign.Center"
                        AllowSorting="false"
                        Data="@_data"
                        TItem="Block"
                        IsLoading="@_isLoading"
                        Count="@_count"
                        LoadData="@LoadData">
            <Columns>
                <RadzenDataGridColumn TItem="Block" Property="BlockHeight" Title="Block Height" Type="typeof(int)">
                    <Template>
                        <a href="/blocks/@context.Hash">@context.Height</a>
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Block" Property="Era" Title="Era" Type="typeof(int)">
                    <Template>
                        @context.EraId
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Block" Property="Deploys" Title="Deploys" Type="typeof(int)">
                    <Template>
                        @(TransactionsCount(context))
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Block" Property="Hash" Title="Block hash" Type="typeof(string)">
                    <Template>
                        <a href="/blocks/@context.Hash">@context.Hash.FormatHash()</a>
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Block" Property="Proposer" Title="Block hash" Type="typeof(string)">
                    <Template>
                        @(context.Proposer.IsSystem ? "00" : context.Proposer.PublicKey.ToString().FormatHash())
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn TItem="Block" Property="Timestamp" Title="Timestamp" Type="typeof(string)">
                    <Template>
                        @context.Timestamp
                    </Template>
                </RadzenDataGridColumn>
            </Columns>
        </RadzenDataGrid>
    </div>
</div>